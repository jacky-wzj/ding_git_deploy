# 更新日志

所有重要的更改都将记录在此文件中。

## [1.0.0] - 2024-12-30

### 新增功能
- ✨ 钉钉机器人 Webhook 集成
- ✨ 自动部署流程 (git pull + pnpm install + pnpm build + nginx reload)
- ✨ 钉钉签名验证
- ✨ 异步命令执行
- ✨ 实时部署进度反馈
- ✨ Markdown 格式的部署结果通知
- ✨ Winston 日志记录
- ✨ 日志自动轮转 (按天)
- ✨ PM2 进程守护
- ✨ 健康检查接口
- ✨ 手动触发部署接口

### 文档
- 📝 完整的 README.md
- 📝 详细的部署指南 (DEPLOY.md)
- 📝 架构设计文档 (ARCHITECTURE.md)
- 📝 常见问题解答 (FAQ.md)
- 📝 快速开始指南 (QUICKSTART.md)

### 脚本工具
- 🔧 自动安装脚本 (scripts/install.sh)
- 🔧 Nginx 配置脚本 (scripts/setup-nginx.sh)
- 🔧 功能测试脚本 (scripts/test.sh)
- 🔧 卸载脚本 (scripts/uninstall.sh)

### 安全
- 🔒 钉钉 HMAC-SHA256 签名验证
- 🔒 命令执行超时控制
- 🔒 错误处理和异常捕获
- 🔒 日志记录审计

### 性能优化
- ⚡ 快速响应钉钉服务器 (避免超时)
- ⚡ 异步执行部署任务
- ⚡ 命令输出缓冲优化
- ⚡ 日志文件自动清理

---

## 计划功能 (TODO)

### v1.1.0
- [ ] 支持多项目部署
- [ ] 部署队列管理 (防止并发冲突)
- [ ] 部署历史记录
- [ ] 自动回滚功能
- [ ] 部署前后钩子

### v1.2.0
- [ ] Web 管理界面
- [ ] 部署统计和监控
- [ ] 邮件通知
- [ ] 企业微信机器人支持
- [ ] Slack 机器人支持

### v1.3.0
- [ ] Docker 部署支持
- [ ] Kubernetes 部署支持
- [ ] 灰度发布
- [ ] A/B 测试支持
- [ ] 蓝绿部署

### v2.0.0
- [ ] 微服务架构重构
- [ ] 数据库持久化
- [ ] 用户权限管理
- [ ] API 接口完善
- [ ] GraphQL 支持

---

## 已知问题

### v1.0.0
- ⚠️ 不支持并发部署 (多人同时触发可能导致冲突)
- ⚠️ 部署失败时无法自动回滚
- ⚠️ 命令输出过长时可能被截断
- ⚠️ 暂不支持 Windows 服务器

**解决方案:**
- 并发部署: 将在 v1.1.0 中添加队列管理
- 自动回滚: 将在 v1.1.0 中实现
- 输出截断: 已增大缓冲区,后续优化
- Windows 支持: 计划在 v1.2.0 中支持

---

## 贡献

欢迎提交 Issue 和 Pull Request!

---

## 许可证

MIT License

